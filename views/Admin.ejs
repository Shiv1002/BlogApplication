<%- include('layouts/AdminHeader') -%>

  <body>
    <div class="admin-container">
      <div class="admin-profile">
        <div class="profilepic">
          <img class="pic" src="<%= admin.photo %> " alt="<%=admin.photo%>" />
          <span>
            <%=admin.username%>
          </span>
        </div>
        <div class="profiledetail">
          <span><strong>
              <%=admin.name%>
            </strong></span>
          <span><strong>
              <%=admin.email%>
            </strong></span>
          <a class="editbtn" href="">Edit profile</a>
        </div>
      </div>
      <div class="admin-page-section">
        <section class="admin-section">
          <h2 class="post-title">Recent Posts</h2>
          <div class="admin-post-section">
            <table>
              <tr>
                <th>Blogs</th>
                <th>Author</th>
                <th>Published</th>
                <th colspan="2">Actions</th>
              </tr>
              <% posts.forEach(post=> { %>
                <tr>
                  <!-- title -->
                  <td>
                    <span class="">
                      <a href="/blogs/<%=post.id%>">
                        <%= post.title %>
                      </a>
                    </span>
                  </td>
                  <!-- author -->
                  <td>
                    <span><a href="/users/profile/<%=post.author_id%>">
                        <%=post.author%>
                      </a></span>
                  </td>
                  <!-- publisheddate -->
                  <td>
                    <span>
                      <%= Intl.DateTimeFormat("en-in",{ year: 'numeric' , month: 'numeric' , day: 'numeric' ,
                        hour: '2-digit' , timeZoneName: 'short' }).format(post.publication_date) %>
                    </span>
                  </td>
                  <!-- actions -->
                  <td>
                    <a title="block this blog" style="color: rgb(187, 0, 0)" href="/admin/block-post/<%= post.id %>"
                      onclick="return confirm('Are you sure?')">Block</a>
                  </td>
                  <td>
                    <a title="remove this blog" style="color: rgb(187, 0, 0)" href="/admin/delete-post/<%= post.id %>"
                      onclick="return confirm('Are you sure?')">remove</a>
                  </td>
                </tr>
                <%})%>
            </table>
          </div>

          <h2 class="post-title">Your Posts</h2>
          <div class="admin-post-section">

            <% if(!adminBlogs.length) { %>

              <h3 style="text-align: center">No Posts Yet!!</h3>

              <%}%>


                <!--  -->
                <table>
                  <tr>
                    <th>Blogs</th>
                    <th>Author</th>
                    <th>Published</th>
                    <th colspan="2">Actions</th>
                  </tr>
                  <% adminBlogs.forEach(post=> { %>
                    <tr>
                      <!-- title -->
                      <td>
                        <span class="">
                          <a href="/blogs/<%=post.id%>">
                            <%= post.title %>
                          </a>
                        </span>
                      </td>
                      <!-- author -->
                      <td>
                        <span><a href="/users/profle/<%=post.author_id%>">
                            <%=post.author%>
                          </a></span>
                      </td>
                      <!-- publisheddate -->
                      <td>
                        <span>
                          <%= Intl.DateTimeFormat("en-in",{ year: 'numeric' , month: 'numeric' , day: 'numeric' ,
                            hour: '2-digit' , timeZoneName: 'short' }).format(post.publication_date) %>
                        </span>
                      </td>
                      <!-- actions -->
                      <td>
                        <a title="block this blog" style="color: rgb(187, 0, 0)" href="/admin/block-post/<%= post.id %>"
                          onclick="return confirm('Are you sure?')">Block</a>
                      </td>
                      <td>
                        <a title="remove this blog" style="color: rgb(187, 0, 0)"
                          href="/admin/delete-post/<%= post.id %>" onclick="return confirm('Are you sure?')">remove</a>
                      </td>
                    </tr>
                    <%})%>
                </table>
                <!--  -->
                <!-- <% adminBlogs.forEach(post => { %>
            <li>
              <a href="/blogs/<%=post.id%>"> <%= post.title %> </a> by : <%=
              post.author %> <span>|</span>
              <%= Intl.DateTimeFormat("en-in",{ year: 'numeric', month: 'short',
              day: 'numeric', hour: '2-digit', timeZoneName: 'short'
              }).format(post.publication_date) %>
              <div style="font-weight: 400; font-size: medium">
                <a
                  title="block this blog"
                  style="color: rgb(187, 0, 0)"
                  href="/admin/block-post/<%= post.id %>"
                  onclick="return confirm('Are you sure?')"
                  >Block</a
                >
                <a
                  title="delete  this blog"
                  style="color: rgb(187, 0, 0)"
                  href="/admin/delete-post/<%= post.id %>"
                  onclick="return confirm('Are you sure?')"
                  >remove</a
                >
              </div>
            </li>
            <% }) %> -->



          </div>
        </section>
      </div>
    </div>

    <footer>
      <p>&copy; 2024 Blog Application. All Rights Reserved.</p>
    </footer>
  </body>